!function(){"use strict";function t(t){return angular.isArray(t)?2==t.length?t.concat(t):3==t.length?t.concat([t[1]]):t:[t,t,t,t]}function e(t,e){if(!e)return t;var i=n(e[0])?parseFloat(e[0])*t.height/100:e[0],o=n(e[1])?parseFloat(e[1])*t.width/100:e[1],r=n(e[2])?parseFloat(e[2])*t.height/100:e[2],u=n(e[3])?parseFloat(e[3])*t.width/100:e[3];return{top:t.top-i,left:t.left-u,bottom:t.bottom+r,right:t.right+o,height:t.height+i+r,width:t.width+u+o}}function n(t){return angular.isString(t)&&t.indexOf("%")>0}function i(t){this.didSubscribeFunc=t}function o(t,e){return new i((function(n){var i=function(t){n(t)},o=angular.element(t);e.split(" ").map((function(t){o[0].addEventListener(t,i,!0)})),n.$dispose=function(){e.split(" ").map((function(t){o[0].removeEventListener(t,i,!0)}))}}))}angular.module("angular-inview",[]).directive("inView",["$parse",function(n){return{restrict:"A",require:"?^^inViewContainer",link:function(r,u,c,s){var l={};c.inViewOptions&&(l=r.$eval(c.inViewOptions)),l.offset&&(l.offset=t(l.offset)),l.viewportOffset&&(l.viewportOffset=t(l.viewportOffset));var a,f=(a={type:"initial"},new i((function(t){setTimeout((function(){t(a)}))}))).merge(o(window,"checkInView click ready wheel mousewheel DomMouseScroll MozMousePixelScroll resize scroll touchmove mouseup keydown"));s&&(f=f.merge(s.eventsSignal)),l.throttle&&(f=f.throttle(l.throttle));var p=f.map((function(t){var n;n=e(n=s?s.getViewportRect():function(){var t={top:0,left:0,width:window.innerWidth,right:window.innerWidth,height:window.innerHeight,bottom:window.innerHeight};return t.height?t:("CSS1Compat"===document.compatMode?(t.width=t.right=document.documentElement.clientWidth,t.height=t.bottom=document.documentElement.clientHeight):(t.width=t.right=document.body.clientWidth,t.height=t.bottom=document.body.clientHeight),t)}(),l.viewportOffset);var i,o,r=e(u[0].getBoundingClientRect(),l.offset),c,a={inView:!!(u[0].offsetWidth||u[0].offsetHeight||u[0].getClientRects().length)&&(i=r,o=n,!(o.left>i.right||o.right<i.left||o.top>i.bottom||o.bottom<i.top)),event:t,element:u,elementRect:r,viewportRect:n};return l.generateParts&&a.inView&&(a.parts={},a.parts.top=r.top>=n.top,a.parts.left=r.left>=n.left,a.parts.bottom=r.bottom<=n.bottom,a.parts.right=r.right<=n.right),a})).scan({},(function(t,e){return l.generateDirection&&e.inView&&t.elementRect&&(e.direction={horizontal:e.elementRect.left-t.elementRect.left,vertical:e.elementRect.top-t.elementRect.top}),e.changed=e.inView!==t.inView||!angular.equals(e.parts,t.parts)||!angular.equals(e.direction,t.direction),e})).filter((function(t){return!(!t.changed||"initial"===t.event.type&&!t.inView)})),h=n(c.inView),d=p.subscribe((function(t){r.$applyAsync((function(){h(r,{$inview:t.inView,$inviewInfo:t})}))}));r.$on("$destroy",d)}}}]).directive("inViewContainer",(function(){return{restrict:"A",controller:["$element",function(t){this.element=t,this.eventsSignal=o(t,"scroll"),this.getViewportRect=function(){return t[0].getBoundingClientRect()}}]}})),i.prototype.subscribe=function(t){return this.didSubscribeFunc(t),function(){t.$dispose&&(t.$dispose(),t.$dispose=null)}},i.prototype.map=function(t){var e=this;return new i((function(n){n.$dispose=e.subscribe((function(e){n(t(e))}))}))},i.prototype.filter=function(t){var e=this;return new i((function(n){n.$dispose=e.subscribe((function(e){t(e)&&n(e)}))}))},i.prototype.scan=function(t,e){var n=this;return new i((function(i){var o=t;i.$dispose=n.subscribe((function(t){o=e(o,t),i(o)}))}))},i.prototype.merge=function(t){return function(){var t=arguments;return new i((function(e){for(var n=[],i=t.length-1;i>=0;i--)n.push(t[i].subscribe((function(){e.apply(null,arguments)})));e.$dispose=function(){for(var t=n.length-1;t>=0;t--)n[t]&&n[t]()}}))}(this,t)},i.prototype.throttle=function(t){var e,n,o=this;return new i((function(i){var r=o.subscribe((function(){var o=+new Date,r=arguments;e&&o<e+t?(clearTimeout(n),n=setTimeout((function(){e=o,i.apply(null,r)}),t)):(e=o,i.apply(null,r))}));i.$dispose=function(){clearTimeout(n),r&&r()}}))},"function"==typeof define&&define.amd?define(["angular"],"angular-inview"):"undefined"!=typeof module&&module&&module.exports&&(module.exports="angular-inview")}();