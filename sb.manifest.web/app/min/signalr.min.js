!function webpackUniversalModuleDefinition(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?exports.signalR=factory():root.signalR=factory()}(window,(function(){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module.default}:function getModuleExports(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var es6_promise_dist_es6_promise_auto_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),es6_promise_dist_es6_promise_auto_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(es6_promise_dist_es6_promise_auto_js__WEBPACK_IMPORTED_MODULE_0__),_index__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3);__webpack_require__.d(__webpack_exports__,"VERSION",(function(){return _index__WEBPACK_IMPORTED_MODULE_1__.VERSION})),__webpack_require__.d(__webpack_exports__,"AbortError",(function(){return _index__WEBPACK_IMPORTED_MODULE_1__.AbortError})),__webpack_require__.d(__webpack_exports__,"HttpError",(function(){return _index__WEBPACK_IMPORTED_MODULE_1__.HttpError})),__webpack_require__.d(__webpack_exports__,"TimeoutError",(function(){return _index__WEBPACK_IMPORTED_MODULE_1__.TimeoutError})),__webpack_require__.d(__webpack_exports__,"HttpClient",(function(){return _index__WEBPACK_IMPORTED_MODULE_1__.HttpClient})),__webpack_require__.d(__webpack_exports__,"HttpResponse",(function(){return _index__WEBPACK_IMPORTED_MODULE_1__.HttpResponse})),__webpack_require__.d(__webpack_exports__,"DefaultHttpClient",(function(){return _index__WEBPACK_IMPORTED_MODULE_1__.DefaultHttpClient})),__webpack_require__.d(__webpack_exports__,"HubConnection",(function(){return _index__WEBPACK_IMPORTED_MODULE_1__.HubConnection})),__webpack_require__.d(__webpack_exports__,"HubConnectionState",(function(){return _index__WEBPACK_IMPORTED_MODULE_1__.HubConnectionState})),__webpack_require__.d(__webpack_exports__,"HubConnectionBuilder",(function(){return _index__WEBPACK_IMPORTED_MODULE_1__.HubConnectionBuilder})),__webpack_require__.d(__webpack_exports__,"MessageType",(function(){return _index__WEBPACK_IMPORTED_MODULE_1__.MessageType})),__webpack_require__.d(__webpack_exports__,"LogLevel",(function(){return _index__WEBPACK_IMPORTED_MODULE_1__.LogLevel})),__webpack_require__.d(__webpack_exports__,"HttpTransportType",(function(){return _index__WEBPACK_IMPORTED_MODULE_1__.HttpTransportType})),__webpack_require__.d(__webpack_exports__,"TransferFormat",(function(){return _index__WEBPACK_IMPORTED_MODULE_1__.TransferFormat})),__webpack_require__.d(__webpack_exports__,"NullLogger",(function(){return _index__WEBPACK_IMPORTED_MODULE_1__.NullLogger})),__webpack_require__.d(__webpack_exports__,"JsonHubProtocol",(function(){return _index__WEBPACK_IMPORTED_MODULE_1__.JsonHubProtocol})),__webpack_require__.d(__webpack_exports__,"Subject",(function(){return _index__WEBPACK_IMPORTED_MODULE_1__.Subject})),Uint8Array.prototype.indexOf||Object.defineProperty(Uint8Array.prototype,"indexOf",{value:Array.prototype.indexOf,writable:!0}),Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:function(start,end){return new Uint8Array(Array.prototype.slice.call(this,start,end))},writable:!0}),Uint8Array.prototype.forEach||Object.defineProperty(Uint8Array.prototype,"forEach",{value:Array.prototype.forEach,writable:!0})},function(module,exports,__webpack_require__){(function(global){var require;
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.2+97478eb6
 */
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.2+97478eb6
 */!function(global,factory){module.exports=factory()}(this,(function(){"use strict";function objectOrFunction(x){var type=typeof x;return null!==x&&("object"===type||"function"===type)}function isFunction(x){return"function"==typeof x}var _isArray=void 0,isArray=_isArray=Array.isArray?Array.isArray:function(x){return"[object Array]"===Object.prototype.toString.call(x)},len=0,vertxNext=void 0,customSchedulerFn=void 0,asap=function asap(callback,arg){queue[len]=callback,queue[len+1]=arg,2===(len+=2)&&(customSchedulerFn?customSchedulerFn(flush):scheduleFlush())};function setScheduler(scheduleFn){customSchedulerFn=scheduleFn}function setAsap(asapFn){asap=asapFn}var browserWindow="undefined"!=typeof window?window:void 0,browserGlobal=browserWindow||{},BrowserMutationObserver=browserGlobal.MutationObserver||browserGlobal.WebKitMutationObserver,isNode="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),isWorker="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function useNextTick(){return function(){return process.nextTick(flush)}}function useVertxTimer(){return void 0!==vertxNext?function(){vertxNext(flush)}:useSetTimeout()}function useMutationObserver(){var iterations=0,observer=new BrowserMutationObserver(flush),node=document.createTextNode("");return observer.observe(node,{characterData:!0}),function(){node.data=iterations=++iterations%2}}function useMessageChannel(){var channel=new MessageChannel;return channel.port1.onmessage=flush,function(){return channel.port2.postMessage(0)}}function useSetTimeout(){var globalSetTimeout=setTimeout;return function(){return globalSetTimeout(flush,1)}}var queue=new Array(1e3);function flush(){for(var i=0;i<len;i+=2){var callback,arg;(0,queue[i])(queue[i+1]),queue[i]=void 0,queue[i+1]=void 0}len=0}function attemptVertx(){try{var r=void 0,vertx=__webpack_require__(!function webpackMissingModule(){var e=new Error("Cannot find module 'vertx'");throw e.code="MODULE_NOT_FOUND",e}());return vertxNext=vertx.runOnLoop||vertx.runOnContext,useVertxTimer()}catch(e){return useSetTimeout()}}var scheduleFlush=void 0;function then(onFulfillment,onRejection){var parent=this,child=new this.constructor(noop);void 0===child[PROMISE_ID]&&makePromise(child);var _state=parent._state;if(_state){var callback=arguments[_state-1];asap((function(){return invokeCallback(_state,child,callback,parent._result)}))}else subscribe(parent,child,onFulfillment,onRejection);return child}function resolve$1(object){var Constructor=this;if(object&&"object"==typeof object&&object.constructor===this)return object;var promise=new this(noop);return resolve(promise,object),promise}scheduleFlush=isNode?useNextTick():BrowserMutationObserver?useMutationObserver():isWorker?useMessageChannel():void 0===browserWindow?attemptVertx():useSetTimeout();var PROMISE_ID=Math.random().toString(36).substring(16);function noop(){}var PENDING=void 0,FULFILLED=1,REJECTED=2,GET_THEN_ERROR=new ErrorObject;function selfFulfillment(){return new TypeError("You cannot resolve a promise with itself")}function cannotReturnOwn(){return new TypeError("A promises callback cannot return that same promise.")}function getThen(promise){try{return promise.then}catch(error){return GET_THEN_ERROR.error=error,GET_THEN_ERROR}}function tryThen(then$$1,value,fulfillmentHandler,rejectionHandler){try{then$$1.call(value,fulfillmentHandler,rejectionHandler)}catch(e){return e}}function handleForeignThenable(promise,thenable,then$$1){asap((function(promise){var sealed=!1,error=tryThen(then$$1,thenable,(function(value){sealed||(sealed=!0,thenable!==value?resolve(promise,value):fulfill(promise,value))}),(function(reason){sealed||(sealed=!0,reject(promise,reason))}),"Settle: "+(promise._label||" unknown promise"));!sealed&&error&&(sealed=!0,reject(promise,error))}),promise)}function handleOwnThenable(promise,thenable){1===thenable._state?fulfill(promise,thenable._result):2===thenable._state?reject(promise,thenable._result):subscribe(thenable,void 0,(function(value){return resolve(promise,value)}),(function(reason){return reject(promise,reason)}))}function handleMaybeThenable(promise,maybeThenable,then$$1){maybeThenable.constructor===promise.constructor&&then$$1===then&&maybeThenable.constructor.resolve===resolve$1?handleOwnThenable(promise,maybeThenable):then$$1===GET_THEN_ERROR?(reject(promise,GET_THEN_ERROR.error),GET_THEN_ERROR.error=null):void 0===then$$1?fulfill(promise,maybeThenable):isFunction(then$$1)?handleForeignThenable(promise,maybeThenable,then$$1):fulfill(promise,maybeThenable)}function resolve(promise,value){promise===value?reject(promise,selfFulfillment()):objectOrFunction(value)?handleMaybeThenable(promise,value,getThen(value)):fulfill(promise,value)}function publishRejection(promise){promise._onerror&&promise._onerror(promise._result),publish(promise)}function fulfill(promise,value){void 0===promise._state&&(promise._result=value,promise._state=1,0!==promise._subscribers.length&&asap(publish,promise))}function reject(promise,reason){void 0===promise._state&&(promise._state=2,promise._result=reason,asap(publishRejection,promise))}function subscribe(parent,child,onFulfillment,onRejection){var _subscribers=parent._subscribers,length=_subscribers.length;parent._onerror=null,_subscribers[length]=child,_subscribers[length+1]=onFulfillment,_subscribers[length+2]=onRejection,0===length&&parent._state&&asap(publish,parent)}function publish(promise){var subscribers=promise._subscribers,settled=promise._state;if(0!==subscribers.length){for(var child=void 0,callback=void 0,detail=promise._result,i=0;i<subscribers.length;i+=3)child=subscribers[i],callback=subscribers[i+settled],child?invokeCallback(settled,child,callback,detail):callback(detail);promise._subscribers.length=0}}function ErrorObject(){this.error=null}var TRY_CATCH_ERROR=new ErrorObject;function tryCatch(callback,detail){try{return callback(detail)}catch(e){return TRY_CATCH_ERROR.error=e,TRY_CATCH_ERROR}}function invokeCallback(settled,promise,callback,detail){var hasCallback=isFunction(callback),value=void 0,error=void 0,succeeded=void 0,failed=void 0;if(hasCallback){if((value=tryCatch(callback,detail))===TRY_CATCH_ERROR?(failed=!0,error=value.error,value.error=null):succeeded=!0,promise===value)return void reject(promise,cannotReturnOwn())}else value=detail,succeeded=!0;void 0!==promise._state||(hasCallback&&succeeded?resolve(promise,value):failed?reject(promise,error):1===settled?fulfill(promise,value):2===settled&&reject(promise,value))}function initializePromise(promise,resolver){try{resolver((function resolvePromise(value){resolve(promise,value)}),(function rejectPromise(reason){reject(promise,reason)}))}catch(e){reject(promise,e)}}var id=0;function nextId(){return id++}function makePromise(promise){promise[PROMISE_ID]=id++,promise._state=void 0,promise._result=void 0,promise._subscribers=[]}function validationError(){return new Error("Array Methods must be provided an Array")}function validationError(){return new Error("Array Methods must be provided an Array")}var Enumerator=function(){function Enumerator(Constructor,input){this._instanceConstructor=Constructor,this.promise=new Constructor(noop),this.promise[PROMISE_ID]||makePromise(this.promise),isArray(input)?(this.length=input.length,this._remaining=input.length,this._result=new Array(this.length),0===this.length?fulfill(this.promise,this._result):(this.length=this.length||0,this._enumerate(input),0===this._remaining&&fulfill(this.promise,this._result))):reject(this.promise,validationError())}return Enumerator.prototype._enumerate=function _enumerate(input){for(var i=0;void 0===this._state&&i<input.length;i++)this._eachEntry(input[i],i)},Enumerator.prototype._eachEntry=function _eachEntry(entry,i){var c=this._instanceConstructor,resolve$$1=c.resolve;if(resolve$$1===resolve$1){var _then=getThen(entry);if(_then===then&&void 0!==entry._state)this._settledAt(entry._state,i,entry._result);else if("function"!=typeof _then)this._remaining--,this._result[i]=entry;else if(c===Promise$2){var promise=new c(noop);handleMaybeThenable(promise,entry,_then),this._willSettleAt(promise,i)}else this._willSettleAt(new c((function(resolve$$1){return resolve$$1(entry)})),i)}else this._willSettleAt(resolve$$1(entry),i)},Enumerator.prototype._settledAt=function _settledAt(state,i,value){var promise=this.promise;void 0===promise._state&&(this._remaining--,2===state?reject(promise,value):this._result[i]=value),0===this._remaining&&fulfill(promise,this._result)},Enumerator.prototype._willSettleAt=function _willSettleAt(promise,i){var enumerator=this;subscribe(promise,void 0,(function(value){return enumerator._settledAt(1,i,value)}),(function(reason){return enumerator._settledAt(2,i,reason)}))},Enumerator}();function all(entries){return new Enumerator(this,entries).promise}function race(entries){var Constructor=this;return isArray(entries)?new Constructor((function(resolve,reject){for(var length=entries.length,i=0;i<length;i++)Constructor.resolve(entries[i]).then(resolve,reject)})):new Constructor((function(_,reject){return reject(new TypeError("You must pass an array to race."))}))}function reject$1(reason){var Constructor=this,promise=new this(noop);return reject(promise,reason),promise}function needsResolver(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var Promise$2=function(){function Promise(resolver){this[PROMISE_ID]=nextId(),this._result=this._state=void 0,this._subscribers=[],noop!==resolver&&("function"!=typeof resolver&&needsResolver(),this instanceof Promise?initializePromise(this,resolver):needsNew())}return Promise.prototype.catch=function _catch(onRejection){return this.then(null,onRejection)},Promise.prototype.finally=function _finally(callback){var promise=this,constructor=this.constructor;return this.then((function(value){return constructor.resolve(callback()).then((function(){return value}))}),(function(reason){return constructor.resolve(callback()).then((function(){throw reason}))}))},Promise}();function polyfill(){var local=void 0;if(void 0!==global)local=global;else if("undefined"!=typeof self)local=self;else try{local=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var P=local.Promise;if(P){var promiseToString=null;try{promiseToString=Object.prototype.toString.call(P.resolve())}catch(e){}if("[object Promise]"===promiseToString&&!P.cast)return}local.Promise=Promise$2}return Promise$2.prototype.then=then,Promise$2.all=all,Promise$2.race=race,Promise$2.resolve=resolve$1,Promise$2.reject=reject$1,Promise$2._setScheduler=setScheduler,Promise$2._setAsap=setAsap,Promise$2._asap=asap,Promise$2.polyfill=polyfill,Promise$2.Promise=Promise$2,Promise$2.polyfill(),Promise$2}))}).call(this,__webpack_require__(2))},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"==typeof window&&(g=window)}module.exports=g},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"VERSION",(function(){return VERSION}));var _Errors__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4);__webpack_require__.d(__webpack_exports__,"AbortError",(function(){return _Errors__WEBPACK_IMPORTED_MODULE_0__.AbortError})),__webpack_require__.d(__webpack_exports__,"HttpError",(function(){return _Errors__WEBPACK_IMPORTED_MODULE_0__.HttpError})),__webpack_require__.d(__webpack_exports__,"TimeoutError",(function(){return _Errors__WEBPACK_IMPORTED_MODULE_0__.TimeoutError}));var _HttpClient__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5);__webpack_require__.d(__webpack_exports__,"HttpClient",(function(){return _HttpClient__WEBPACK_IMPORTED_MODULE_1__.HttpClient})),__webpack_require__.d(__webpack_exports__,"HttpResponse",(function(){return _HttpClient__WEBPACK_IMPORTED_MODULE_1__.HttpResponse}));var _DefaultHttpClient__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6);__webpack_require__.d(__webpack_exports__,"DefaultHttpClient",(function(){return _DefaultHttpClient__WEBPACK_IMPORTED_MODULE_2__.DefaultHttpClient}));var _HubConnection__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10);__webpack_require__.d(__webpack_exports__,"HubConnection",(function(){return _HubConnection__WEBPACK_IMPORTED_MODULE_3__.HubConnection})),__webpack_require__.d(__webpack_exports__,"HubConnectionState",(function(){return _HubConnection__WEBPACK_IMPORTED_MODULE_3__.HubConnectionState}));var _HubConnectionBuilder__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(17);__webpack_require__.d(__webpack_exports__,"HubConnectionBuilder",(function(){return _HubConnectionBuilder__WEBPACK_IMPORTED_MODULE_4__.HubConnectionBuilder}));var _IHubProtocol__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(15);__webpack_require__.d(__webpack_exports__,"MessageType",(function(){return _IHubProtocol__WEBPACK_IMPORTED_MODULE_5__.MessageType}));var _ILogger__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(9);__webpack_require__.d(__webpack_exports__,"LogLevel",(function(){return _ILogger__WEBPACK_IMPORTED_MODULE_6__.LogLevel}));var _ITransport__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(20);__webpack_require__.d(__webpack_exports__,"HttpTransportType",(function(){return _ITransport__WEBPACK_IMPORTED_MODULE_7__.HttpTransportType})),__webpack_require__.d(__webpack_exports__,"TransferFormat",(function(){return _ITransport__WEBPACK_IMPORTED_MODULE_7__.TransferFormat}));var _Loggers__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(14);__webpack_require__.d(__webpack_exports__,"NullLogger",(function(){return _Loggers__WEBPACK_IMPORTED_MODULE_8__.NullLogger}));var _JsonHubProtocol__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(25);__webpack_require__.d(__webpack_exports__,"JsonHubProtocol",(function(){return _JsonHubProtocol__WEBPACK_IMPORTED_MODULE_9__.JsonHubProtocol}));var _Subject__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(16);__webpack_require__.d(__webpack_exports__,"Subject",(function(){return _Subject__WEBPACK_IMPORTED_MODULE_10__.Subject}));var VERSION="3.1.7"},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"HttpError",(function(){return HttpError})),__webpack_require__.d(__webpack_exports__,"TimeoutError",(function(){return TimeoutError})),__webpack_require__.d(__webpack_exports__,"AbortError",(function(){return AbortError}));var __extends=(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),extendStatics,HttpError=function(_super){function HttpError(errorMessage,statusCode){var _newTarget,_this=this,trueProto=this.constructor.prototype;return(_this=_super.call(this,errorMessage)||this).statusCode=statusCode,_this.__proto__=trueProto,_this}return __extends(HttpError,_super),HttpError}(Error),TimeoutError=function(_super){function TimeoutError(errorMessage){var _newTarget;void 0===errorMessage&&(errorMessage="A timeout occurred.");var _this=this,trueProto=this.constructor.prototype;return(_this=_super.call(this,errorMessage)||this).__proto__=trueProto,_this}return __extends(TimeoutError,_super),TimeoutError}(Error),AbortError=function(_super){function AbortError(errorMessage){var _newTarget;void 0===errorMessage&&(errorMessage="An abort occurred.");var _this=this,trueProto=this.constructor.prototype;return(_this=_super.call(this,errorMessage)||this).__proto__=trueProto,_this}return __extends(AbortError,_super),AbortError}(Error)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"HttpResponse",(function(){return HttpResponse})),__webpack_require__.d(__webpack_exports__,"HttpClient",(function(){return HttpClient}));var __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},HttpResponse=function(){function HttpResponse(statusCode,statusText,content){this.statusCode=statusCode,this.statusText=statusText,this.content=content}return HttpResponse}(),HttpClient=function(){function HttpClient(){}return HttpClient.prototype.get=function(url,options){return this.send(__assign({},options,{method:"GET",url:url}))},HttpClient.prototype.post=function(url,options){return this.send(__assign({},options,{method:"POST",url:url}))},HttpClient.prototype.delete=function(url,options){return this.send(__assign({},options,{method:"DELETE",url:url}))},HttpClient.prototype.getCookieString=function(url){return""},HttpClient}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"DefaultHttpClient",(function(){return DefaultHttpClient}));var _Errors__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_HttpClient__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_NodeHttpClient__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7),_XhrHttpClient__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),__extends=(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),extendStatics,DefaultHttpClient=function(_super){function DefaultHttpClient(logger){var _this=_super.call(this)||this;return"undefined"!=typeof XMLHttpRequest?_this.httpClient=new _XhrHttpClient__WEBPACK_IMPORTED_MODULE_3__.XhrHttpClient(logger):_this.httpClient=new _NodeHttpClient__WEBPACK_IMPORTED_MODULE_2__.NodeHttpClient(logger),_this}return __extends(DefaultHttpClient,_super),DefaultHttpClient.prototype.send=function(request){return request.abortSignal&&request.abortSignal.aborted?Promise.reject(new _Errors__WEBPACK_IMPORTED_MODULE_0__.AbortError):request.method?request.url?this.httpClient.send(request):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},DefaultHttpClient.prototype.getCookieString=function(url){return this.httpClient.getCookieString(url)},DefaultHttpClient}(_HttpClient__WEBPACK_IMPORTED_MODULE_1__.HttpClient)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NodeHttpClient",(function(){return NodeHttpClient}));var _HttpClient__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5),__extends=(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),extendStatics,NodeHttpClient=function(_super){function NodeHttpClient(logger){return _super.call(this)||this}return __extends(NodeHttpClient,_super),NodeHttpClient.prototype.send=function(){return Promise.reject(new Error("If using Node either provide an XmlHttpRequest polyfill or consume the cjs or esm script instead of the browser/signalr.js one."))},NodeHttpClient}(_HttpClient__WEBPACK_IMPORTED_MODULE_0__.HttpClient)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"XhrHttpClient",(function(){return XhrHttpClient}));var _Errors__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_HttpClient__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_ILogger__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9),__extends=(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),extendStatics,XhrHttpClient=function(_super){function XhrHttpClient(logger){var _this=_super.call(this)||this;return _this.logger=logger,_this}return __extends(XhrHttpClient,_super),XhrHttpClient.prototype.send=function(request){var _this=this;return request.abortSignal&&request.abortSignal.aborted?Promise.reject(new _Errors__WEBPACK_IMPORTED_MODULE_0__.AbortError):request.method?request.url?new Promise((function(resolve,reject){var xhr=new XMLHttpRequest;xhr.open(request.method,request.url,!0),xhr.withCredentials=!0,xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr.setRequestHeader("Content-Type","text/plain;charset=UTF-8");var headers=request.headers;headers&&Object.keys(headers).forEach((function(header){xhr.setRequestHeader(header,headers[header])})),request.responseType&&(xhr.responseType=request.responseType),request.abortSignal&&(request.abortSignal.onabort=function(){xhr.abort(),reject(new _Errors__WEBPACK_IMPORTED_MODULE_0__.AbortError)}),request.timeout&&(xhr.timeout=request.timeout),xhr.onload=function(){request.abortSignal&&(request.abortSignal.onabort=null),xhr.status>=200&&xhr.status<300?resolve(new _HttpClient__WEBPACK_IMPORTED_MODULE_1__.HttpResponse(xhr.status,xhr.statusText,xhr.response||xhr.responseText)):reject(new _Errors__WEBPACK_IMPORTED_MODULE_0__.HttpError(xhr.statusText,xhr.status))},xhr.onerror=function(){_this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Warning,"Error from HTTP request. "+xhr.status+": "+xhr.statusText+"."),reject(new _Errors__WEBPACK_IMPORTED_MODULE_0__.HttpError(xhr.statusText,xhr.status))},xhr.ontimeout=function(){_this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Warning,"Timeout from HTTP request."),reject(new _Errors__WEBPACK_IMPORTED_MODULE_0__.TimeoutError)},xhr.send(request.content||"")})):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},XhrHttpClient}(_HttpClient__WEBPACK_IMPORTED_MODULE_1__.HttpClient)},function(module,__webpack_exports__,__webpack_require__){"use strict";var LogLevel;__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"LogLevel",(function(){return LogLevel})),function(LogLevel){LogLevel[LogLevel.Trace=0]="Trace",LogLevel[LogLevel.Debug=1]="Debug",LogLevel[LogLevel.Information=2]="Information",LogLevel[LogLevel.Warning=3]="Warning",LogLevel[LogLevel.Error=4]="Error",LogLevel[LogLevel.Critical=5]="Critical",LogLevel[LogLevel.None=6]="None"}(LogLevel||(LogLevel={}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"HubConnectionState",(function(){return HubConnectionState})),__webpack_require__.d(__webpack_exports__,"HubConnection",(function(){return HubConnection}));var _HandshakeProtocol__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11),_IHubProtocol__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(15),_ILogger__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9),_Subject__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(16),_Utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(13),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P((function(resolve){resolve(result.value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var _={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}},DEFAULT_TIMEOUT_IN_MS=3e4,DEFAULT_PING_INTERVAL_IN_MS=15e3,HubConnectionState;!function(HubConnectionState){HubConnectionState.Disconnected="Disconnected",HubConnectionState.Connecting="Connecting",HubConnectionState.Connected="Connected",HubConnectionState.Disconnecting="Disconnecting",HubConnectionState.Reconnecting="Reconnecting"}(HubConnectionState||(HubConnectionState={}));var HubConnection=function(){function HubConnection(connection,logger,protocol,reconnectPolicy){var _this=this;_Utils__WEBPACK_IMPORTED_MODULE_4__.Arg.isRequired(connection,"connection"),_Utils__WEBPACK_IMPORTED_MODULE_4__.Arg.isRequired(logger,"logger"),_Utils__WEBPACK_IMPORTED_MODULE_4__.Arg.isRequired(protocol,"protocol"),this.serverTimeoutInMilliseconds=3e4,this.keepAliveIntervalInMilliseconds=15e3,this.logger=logger,this.protocol=protocol,this.connection=connection,this.reconnectPolicy=reconnectPolicy,this.handshakeProtocol=new _HandshakeProtocol__WEBPACK_IMPORTED_MODULE_0__.HandshakeProtocol,this.connection.onreceive=function(data){return _this.processIncomingData(data)},this.connection.onclose=function(error){return _this.connectionClosed(error)},this.callbacks={},this.methods={},this.closedCallbacks=[],this.reconnectingCallbacks=[],this.reconnectedCallbacks=[],this.invocationId=0,this.receivedHandshakeResponse=!1,this.connectionState=HubConnectionState.Disconnected,this.connectionStarted=!1,this.cachedPingMessage=this.protocol.writeMessage({type:_IHubProtocol__WEBPACK_IMPORTED_MODULE_1__.MessageType.Ping})}return HubConnection.create=function(connection,logger,protocol,reconnectPolicy){return new HubConnection(connection,logger,protocol,reconnectPolicy)},Object.defineProperty(HubConnection.prototype,"state",{get:function(){return this.connectionState},enumerable:!0,configurable:!0}),Object.defineProperty(HubConnection.prototype,"connectionId",{get:function(){return this.connection&&this.connection.connectionId||null},enumerable:!0,configurable:!0}),Object.defineProperty(HubConnection.prototype,"baseUrl",{get:function(){return this.connection.baseUrl||""},set:function(url){if(this.connectionState!==HubConnectionState.Disconnected&&this.connectionState!==HubConnectionState.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!url)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=url},enumerable:!0,configurable:!0}),HubConnection.prototype.start=function(){return this.startPromise=this.startWithStateTransitions(),this.startPromise},HubConnection.prototype.startWithStateTransitions=function(){return __awaiter(this,void 0,void 0,(function(){var e_1;return __generator(this,(function(_a){switch(_a.label){case 0:if(this.connectionState!==HubConnectionState.Disconnected)return[2,Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."))];this.connectionState=HubConnectionState.Connecting,this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Debug,"Starting HubConnection."),_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,this.startInternal()];case 2:return _a.sent(),this.connectionState=HubConnectionState.Connected,this.connectionStarted=!0,this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Debug,"HubConnection connected successfully."),[3,4];case 3:return e_1=_a.sent(),this.connectionState=HubConnectionState.Disconnected,this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Debug,"HubConnection failed to start successfully because of error '"+e_1+"'."),[2,Promise.reject(e_1)];case 4:return[2]}}))}))},HubConnection.prototype.startInternal=function(){return __awaiter(this,void 0,void 0,(function(){var handshakePromise,handshakeRequest,e_2,_this=this;return __generator(this,(function(_a){switch(_a.label){case 0:return this.stopDuringStartError=void 0,this.receivedHandshakeResponse=!1,handshakePromise=new Promise((function(resolve,reject){_this.handshakeResolver=resolve,_this.handshakeRejecter=reject})),[4,this.connection.start(this.protocol.transferFormat)];case 1:_a.sent(),_a.label=2;case 2:return _a.trys.push([2,5,,7]),handshakeRequest={protocol:this.protocol.name,version:this.protocol.version},this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Debug,"Sending handshake request."),[4,this.sendMessage(this.handshakeProtocol.writeHandshakeRequest(handshakeRequest))];case 3:return _a.sent(),this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Information,"Using HubProtocol '"+this.protocol.name+"'."),this.cleanupTimeout(),this.resetTimeoutPeriod(),this.resetKeepAliveInterval(),[4,handshakePromise];case 4:if(_a.sent(),this.stopDuringStartError)throw this.stopDuringStartError;return[3,7];case 5:return e_2=_a.sent(),this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Debug,"Hub handshake failed with error '"+e_2+"' during start(). Stopping HubConnection."),this.cleanupTimeout(),this.cleanupPingTimer(),[4,this.connection.stop(e_2)];case 6:throw _a.sent(),e_2;case 7:return[2]}}))}))},HubConnection.prototype.stop=function(){return __awaiter(this,void 0,void 0,(function(){var startPromise,e_3;return __generator(this,(function(_a){switch(_a.label){case 0:return startPromise=this.startPromise,this.stopPromise=this.stopInternal(),[4,this.stopPromise];case 1:_a.sent(),_a.label=2;case 2:return _a.trys.push([2,4,,5]),[4,startPromise];case 3:return _a.sent(),[3,5];case 4:return e_3=_a.sent(),[3,5];case 5:return[2]}}))}))},HubConnection.prototype.stopInternal=function(error){return this.connectionState===HubConnectionState.Disconnected?(this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Debug,"Call to HubConnection.stop("+error+") ignored because it is already in the disconnected state."),Promise.resolve()):this.connectionState===HubConnectionState.Disconnecting?(this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Debug,"Call to HttpConnection.stop("+error+") ignored because the connection is already in the disconnecting state."),this.stopPromise):(this.connectionState=HubConnectionState.Disconnecting,this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Debug,"Stopping HubConnection."),this.reconnectDelayHandle?(this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this.reconnectDelayHandle),this.reconnectDelayHandle=void 0,this.completeClose(),Promise.resolve()):(this.cleanupTimeout(),this.cleanupPingTimer(),this.stopDuringStartError=error||new Error("The connection was stopped before the hub handshake could complete."),this.connection.stop(error)))},HubConnection.prototype.stream=function(methodName){for(var _this=this,args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];var _a=this.replaceStreamingParams(args),streams=_a[0],streamIds=_a[1],invocationDescriptor=this.createStreamInvocation(methodName,args,streamIds),promiseQueue,subject=new _Subject__WEBPACK_IMPORTED_MODULE_3__.Subject;return subject.cancelCallback=function(){var cancelInvocation=_this.createCancelInvocation(invocationDescriptor.invocationId);return delete _this.callbacks[invocationDescriptor.invocationId],promiseQueue.then((function(){return _this.sendWithProtocol(cancelInvocation)}))},this.callbacks[invocationDescriptor.invocationId]=function(invocationEvent,error){error?subject.error(error):invocationEvent&&(invocationEvent.type===_IHubProtocol__WEBPACK_IMPORTED_MODULE_1__.MessageType.Completion?invocationEvent.error?subject.error(new Error(invocationEvent.error)):subject.complete():subject.next(invocationEvent.item))},promiseQueue=this.sendWithProtocol(invocationDescriptor).catch((function(e){subject.error(e),delete _this.callbacks[invocationDescriptor.invocationId]})),this.launchStreams(streams,promiseQueue),subject},HubConnection.prototype.sendMessage=function(message){return this.resetKeepAliveInterval(),this.connection.send(message)},HubConnection.prototype.sendWithProtocol=function(message){return this.sendMessage(this.protocol.writeMessage(message))},HubConnection.prototype.send=function(methodName){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];var _a=this.replaceStreamingParams(args),streams=_a[0],streamIds=_a[1],sendPromise=this.sendWithProtocol(this.createInvocation(methodName,args,!0,streamIds));return this.launchStreams(streams,sendPromise),sendPromise},HubConnection.prototype.invoke=function(methodName){for(var _this=this,args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];var _a=this.replaceStreamingParams(args),streams=_a[0],streamIds=_a[1],invocationDescriptor=this.createInvocation(methodName,args,!1,streamIds),p=new Promise((function(resolve,reject){_this.callbacks[invocationDescriptor.invocationId]=function(invocationEvent,error){error?reject(error):invocationEvent&&(invocationEvent.type===_IHubProtocol__WEBPACK_IMPORTED_MODULE_1__.MessageType.Completion?invocationEvent.error?reject(new Error(invocationEvent.error)):resolve(invocationEvent.result):reject(new Error("Unexpected message type: "+invocationEvent.type)))};var promiseQueue=_this.sendWithProtocol(invocationDescriptor).catch((function(e){reject(e),delete _this.callbacks[invocationDescriptor.invocationId]}));_this.launchStreams(streams,promiseQueue)}));return p},HubConnection.prototype.on=function(methodName,newMethod){methodName&&newMethod&&(methodName=methodName.toLowerCase(),this.methods[methodName]||(this.methods[methodName]=[]),-1===this.methods[methodName].indexOf(newMethod)&&this.methods[methodName].push(newMethod))},HubConnection.prototype.off=function(methodName,method){if(methodName){methodName=methodName.toLowerCase();var handlers=this.methods[methodName];if(handlers)if(method){var removeIdx=handlers.indexOf(method);-1!==removeIdx&&(handlers.splice(removeIdx,1),0===handlers.length&&delete this.methods[methodName])}else delete this.methods[methodName]}},HubConnection.prototype.onclose=function(callback){callback&&this.closedCallbacks.push(callback)},HubConnection.prototype.onreconnecting=function(callback){callback&&this.reconnectingCallbacks.push(callback)},HubConnection.prototype.onreconnected=function(callback){callback&&this.reconnectedCallbacks.push(callback)},HubConnection.prototype.processIncomingData=function(data){if(this.cleanupTimeout(),this.receivedHandshakeResponse||(data=this.processHandshakeResponse(data),this.receivedHandshakeResponse=!0),data)for(var messages,_i=0,messages_1=this.protocol.parseMessages(data,this.logger);_i<messages_1.length;_i++){var message=messages_1[_i];switch(message.type){case _IHubProtocol__WEBPACK_IMPORTED_MODULE_1__.MessageType.Invocation:this.invokeClientMethod(message);break;case _IHubProtocol__WEBPACK_IMPORTED_MODULE_1__.MessageType.StreamItem:case _IHubProtocol__WEBPACK_IMPORTED_MODULE_1__.MessageType.Completion:var callback=this.callbacks[message.invocationId];callback&&(message.type===_IHubProtocol__WEBPACK_IMPORTED_MODULE_1__.MessageType.Completion&&delete this.callbacks[message.invocationId],callback(message));break;case _IHubProtocol__WEBPACK_IMPORTED_MODULE_1__.MessageType.Ping:break;case _IHubProtocol__WEBPACK_IMPORTED_MODULE_1__.MessageType.Close:this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Information,"Close message received from server.");var error=message.error?new Error("Server returned an error on close: "+message.error):void 0;!0===message.allowReconnect?this.connection.stop(error):this.stopPromise=this.stopInternal(error);break;default:this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Warning,"Invalid message type: "+message.type+".")}}this.resetTimeoutPeriod()},HubConnection.prototype.processHandshakeResponse=function(data){var _a,responseMessage,remainingData;try{remainingData=(_a=this.handshakeProtocol.parseHandshakeResponse(data))[0],responseMessage=_a[1]}catch(e){var message="Error parsing handshake response: "+e;this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Error,message);var error=new Error(message);throw this.handshakeRejecter(error),error}if(responseMessage.error){var message="Server returned handshake error: "+responseMessage.error;this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Error,message);var error=new Error(message);throw this.handshakeRejecter(error),error}return this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Debug,"Server handshake complete."),this.handshakeResolver(),remainingData},HubConnection.prototype.resetKeepAliveInterval=function(){var _this=this;this.cleanupPingTimer(),this.pingServerHandle=setTimeout((function(){return __awaiter(_this,void 0,void 0,(function(){var _a;return __generator(this,(function(_b){switch(_b.label){case 0:if(this.connectionState!==HubConnectionState.Connected)return[3,4];_b.label=1;case 1:return _b.trys.push([1,3,,4]),[4,this.sendMessage(this.cachedPingMessage)];case 2:return _b.sent(),[3,4];case 3:return _a=_b.sent(),this.cleanupPingTimer(),[3,4];case 4:return[2]}}))}))}),this.keepAliveIntervalInMilliseconds)},HubConnection.prototype.resetTimeoutPeriod=function(){var _this=this;this.connection.features&&this.connection.features.inherentKeepAlive||(this.timeoutHandle=setTimeout((function(){return _this.serverTimeout()}),this.serverTimeoutInMilliseconds))},HubConnection.prototype.serverTimeout=function(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))},HubConnection.prototype.invokeClientMethod=function(invocationMessage){var _this=this,methods=this.methods[invocationMessage.target.toLowerCase()];if(methods){try{methods.forEach((function(m){return m.apply(_this,invocationMessage.arguments)}))}catch(e){this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Error,"A callback for the method "+invocationMessage.target.toLowerCase()+" threw error '"+e+"'.")}if(invocationMessage.invocationId){var message="Server requested a response, which is not supported in this version of the client.";this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Error,message),this.stopPromise=this.stopInternal(new Error(message))}}else this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Warning,"No client method with the name '"+invocationMessage.target+"' found.")},HubConnection.prototype.connectionClosed=function(error){this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Debug,"HubConnection.connectionClosed("+error+") called while in state "+this.connectionState+"."),this.stopDuringStartError=this.stopDuringStartError||error||new Error("The underlying connection was closed before the hub handshake could complete."),this.handshakeResolver&&this.handshakeResolver(),this.cancelCallbacksWithError(error||new Error("Invocation canceled due to the underlying connection being closed.")),this.cleanupTimeout(),this.cleanupPingTimer(),this.connectionState===HubConnectionState.Disconnecting?this.completeClose(error):this.connectionState===HubConnectionState.Connected&&this.reconnectPolicy?this.reconnect(error):this.connectionState===HubConnectionState.Connected&&this.completeClose(error)},HubConnection.prototype.completeClose=function(error){var _this=this;if(this.connectionStarted){this.connectionState=HubConnectionState.Disconnected,this.connectionStarted=!1;try{this.closedCallbacks.forEach((function(c){return c.apply(_this,[error])}))}catch(e){this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Error,"An onclose callback called with error '"+error+"' threw error '"+e+"'.")}}},HubConnection.prototype.reconnect=function(error){return __awaiter(this,void 0,void 0,(function(){var reconnectStartTime,previousReconnectAttempts,retryError,nextRetryDelay,e_4,_this=this;return __generator(this,(function(_a){switch(_a.label){case 0:if(reconnectStartTime=Date.now(),previousReconnectAttempts=0,retryError=void 0!==error?error:new Error("Attempting to reconnect due to a unknown error."),null===(nextRetryDelay=this.getNextRetryDelay(previousReconnectAttempts++,0,retryError)))return this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this.completeClose(error),[2];if(this.connectionState=HubConnectionState.Reconnecting,error?this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Information,"Connection reconnecting because of error '"+error+"'."):this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Information,"Connection reconnecting."),this.onreconnecting){try{this.reconnectingCallbacks.forEach((function(c){return c.apply(_this,[error])}))}catch(e){this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Error,"An onreconnecting callback called with error '"+error+"' threw error '"+e+"'.")}if(this.connectionState!==HubConnectionState.Reconnecting)return this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting."),[2]}_a.label=1;case 1:return null===nextRetryDelay?[3,7]:(this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Information,"Reconnect attempt number "+previousReconnectAttempts+" will start in "+nextRetryDelay+" ms."),[4,new Promise((function(resolve){_this.reconnectDelayHandle=setTimeout(resolve,nextRetryDelay)}))]);case 2:if(_a.sent(),this.reconnectDelayHandle=void 0,this.connectionState!==HubConnectionState.Reconnecting)return this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting."),[2];_a.label=3;case 3:return _a.trys.push([3,5,,6]),[4,this.startInternal()];case 4:if(_a.sent(),this.connectionState=HubConnectionState.Connected,this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Information,"HubConnection reconnected successfully."),this.onreconnected)try{this.reconnectedCallbacks.forEach((function(c){return c.apply(_this,[_this.connection.connectionId])}))}catch(e){this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Error,"An onreconnected callback called with connectionId '"+this.connection.connectionId+"; threw error '"+e+"'.")}return[2];case 5:return e_4=_a.sent(),this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Information,"Reconnect attempt failed because of error '"+e_4+"'."),this.connectionState!==HubConnectionState.Reconnecting?(this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Debug,"Connection left the reconnecting state during reconnect attempt. Done reconnecting."),[2]):(retryError=e_4 instanceof Error?e_4:new Error(e_4.toString()),nextRetryDelay=this.getNextRetryDelay(previousReconnectAttempts++,Date.now()-reconnectStartTime,retryError),[3,6]);case 6:return[3,1];case 7:return this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Information,"Reconnect retries have been exhausted after "+(Date.now()-reconnectStartTime)+" ms and "+previousReconnectAttempts+" failed attempts. Connection disconnecting."),this.completeClose(),[2]}}))}))},HubConnection.prototype.getNextRetryDelay=function(previousRetryCount,elapsedMilliseconds,retryReason){try{return this.reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:elapsedMilliseconds,previousRetryCount:previousRetryCount,retryReason:retryReason})}catch(e){return this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Error,"IRetryPolicy.nextRetryDelayInMilliseconds("+previousRetryCount+", "+elapsedMilliseconds+") threw error '"+e+"'."),null}},HubConnection.prototype.cancelCallbacksWithError=function(error){var callbacks=this.callbacks;this.callbacks={},Object.keys(callbacks).forEach((function(key){var callback;(0,callbacks[key])(null,error)}))},HubConnection.prototype.cleanupPingTimer=function(){this.pingServerHandle&&clearTimeout(this.pingServerHandle)},HubConnection.prototype.cleanupTimeout=function(){this.timeoutHandle&&clearTimeout(this.timeoutHandle)},HubConnection.prototype.createInvocation=function(methodName,args,nonblocking,streamIds){if(nonblocking)return{arguments:args,streamIds:streamIds,target:methodName,type:_IHubProtocol__WEBPACK_IMPORTED_MODULE_1__.MessageType.Invocation};var invocationId=this.invocationId;return this.invocationId++,{arguments:args,invocationId:invocationId.toString(),streamIds:streamIds,target:methodName,type:_IHubProtocol__WEBPACK_IMPORTED_MODULE_1__.MessageType.Invocation}},HubConnection.prototype.launchStreams=function(streams,promiseQueue){var _this=this;if(0!==streams.length){promiseQueue||(promiseQueue=Promise.resolve());var _loop_1=function(streamId){streams[streamId].subscribe({complete:function(){promiseQueue=promiseQueue.then((function(){return _this.sendWithProtocol(_this.createCompletionMessage(streamId))}))},error:function(err){var message;message=err instanceof Error?err.message:err&&err.toString?err.toString():"Unknown error",promiseQueue=promiseQueue.then((function(){return _this.sendWithProtocol(_this.createCompletionMessage(streamId,message))}))},next:function(item){promiseQueue=promiseQueue.then((function(){return _this.sendWithProtocol(_this.createStreamItemMessage(streamId,item))}))}})};for(var streamId in streams)_loop_1(streamId)}},HubConnection.prototype.replaceStreamingParams=function(args){for(var streams=[],streamIds=[],i=0;i<args.length;i++){var argument=args[i];if(this.isObservable(argument)){var streamId=this.invocationId;this.invocationId++,streams[streamId]=argument,streamIds.push(streamId.toString()),args.splice(i,1)}}return[streams,streamIds]},HubConnection.prototype.isObservable=function(arg){return arg&&arg.subscribe&&"function"==typeof arg.subscribe},HubConnection.prototype.createStreamInvocation=function(methodName,args,streamIds){var invocationId=this.invocationId;return this.invocationId++,{arguments:args,invocationId:invocationId.toString(),streamIds:streamIds,target:methodName,type:_IHubProtocol__WEBPACK_IMPORTED_MODULE_1__.MessageType.StreamInvocation}},HubConnection.prototype.createCancelInvocation=function(id){return{invocationId:id,type:_IHubProtocol__WEBPACK_IMPORTED_MODULE_1__.MessageType.CancelInvocation}},HubConnection.prototype.createStreamItemMessage=function(id,item){return{invocationId:id,item:item,type:_IHubProtocol__WEBPACK_IMPORTED_MODULE_1__.MessageType.StreamItem}},HubConnection.prototype.createCompletionMessage=function(id,error,result){return error?{error:error,invocationId:id,type:_IHubProtocol__WEBPACK_IMPORTED_MODULE_1__.MessageType.Completion}:{invocationId:id,result:result,type:_IHubProtocol__WEBPACK_IMPORTED_MODULE_1__.MessageType.Completion}},HubConnection}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"HandshakeProtocol",(function(){return HandshakeProtocol}));var _TextMessageFormat__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12),_Utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(13),HandshakeProtocol=function(){function HandshakeProtocol(){}return HandshakeProtocol.prototype.writeHandshakeRequest=function(handshakeRequest){return _TextMessageFormat__WEBPACK_IMPORTED_MODULE_0__.TextMessageFormat.write(JSON.stringify(handshakeRequest))},HandshakeProtocol.prototype.parseHandshakeResponse=function(data){var responseMessage,messageData,remainingData;if(Object(_Utils__WEBPACK_IMPORTED_MODULE_1__.isArrayBuffer)(data)||"undefined"!=typeof Buffer&&data instanceof Buffer){var binaryData=new Uint8Array(data),separatorIndex;if(-1===(separatorIndex=binaryData.indexOf(_TextMessageFormat__WEBPACK_IMPORTED_MODULE_0__.TextMessageFormat.RecordSeparatorCode)))throw new Error("Message is incomplete.");var responseLength=separatorIndex+1;messageData=String.fromCharCode.apply(null,binaryData.slice(0,responseLength)),remainingData=binaryData.byteLength>responseLength?binaryData.slice(responseLength).buffer:null}else{var textData=data,separatorIndex;if(-1===(separatorIndex=textData.indexOf(_TextMessageFormat__WEBPACK_IMPORTED_MODULE_0__.TextMessageFormat.RecordSeparator)))throw new Error("Message is incomplete.");var responseLength=separatorIndex+1;messageData=textData.substring(0,responseLength),remainingData=textData.length>responseLength?textData.substring(responseLength):null}var messages=_TextMessageFormat__WEBPACK_IMPORTED_MODULE_0__.TextMessageFormat.parse(messageData),response=JSON.parse(messages[0]);if(response.type)throw new Error("Expected a handshake response from the server.");return[remainingData,responseMessage=response]},HandshakeProtocol}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"TextMessageFormat",(function(){return TextMessageFormat}));var TextMessageFormat=function(){function TextMessageFormat(){}return TextMessageFormat.write=function(output){return""+output+TextMessageFormat.RecordSeparator},TextMessageFormat.parse=function(input){if(input[input.length-1]!==TextMessageFormat.RecordSeparator)throw new Error("Message is incomplete.");var messages=input.split(TextMessageFormat.RecordSeparator);return messages.pop(),messages},TextMessageFormat.RecordSeparatorCode=30,TextMessageFormat.RecordSeparator=String.fromCharCode(TextMessageFormat.RecordSeparatorCode),TextMessageFormat}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Arg",(function(){return Arg})),__webpack_require__.d(__webpack_exports__,"Platform",(function(){return Platform})),__webpack_require__.d(__webpack_exports__,"getDataDetail",(function(){return getDataDetail})),__webpack_require__.d(__webpack_exports__,"formatArrayBuffer",(function(){return formatArrayBuffer})),__webpack_require__.d(__webpack_exports__,"isArrayBuffer",(function(){return isArrayBuffer})),__webpack_require__.d(__webpack_exports__,"sendMessage",(function(){return sendMessage})),__webpack_require__.d(__webpack_exports__,"createLogger",(function(){return createLogger})),__webpack_require__.d(__webpack_exports__,"SubjectSubscription",(function(){return SubjectSubscription})),__webpack_require__.d(__webpack_exports__,"ConsoleLogger",(function(){return ConsoleLogger}));var _ILogger__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9),_Loggers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(14),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P((function(resolve){resolve(result.value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var _={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}},Arg=function(){function Arg(){}return Arg.isRequired=function(val,name){if(null==val)throw new Error("The '"+name+"' argument is required.")},Arg.isIn=function(val,values,name){if(!(val in values))throw new Error("Unknown "+name+" value: "+val+".")},Arg}(),Platform=function(){function Platform(){}return Object.defineProperty(Platform,"isBrowser",{get:function(){return"object"==typeof window},enumerable:!0,configurable:!0}),Object.defineProperty(Platform,"isWebWorker",{get:function(){return"object"==typeof self&&"importScripts"in self},enumerable:!0,configurable:!0}),Object.defineProperty(Platform,"isNode",{get:function(){return!this.isBrowser&&!this.isWebWorker},enumerable:!0,configurable:!0}),Platform}();function getDataDetail(data,includeContent){var detail="";return isArrayBuffer(data)?(detail="Binary data of length "+data.byteLength,includeContent&&(detail+=". Content: '"+formatArrayBuffer(data)+"'")):"string"==typeof data&&(detail="String data of length "+data.length,includeContent&&(detail+=". Content: '"+data+"'")),detail}function formatArrayBuffer(data){var view=new Uint8Array(data),str="";return view.forEach((function(num){var pad;str+="0x"+(num<16?"0":"")+num.toString(16)+" "})),str.substr(0,str.length-1)}function isArrayBuffer(val){return val&&"undefined"!=typeof ArrayBuffer&&(val instanceof ArrayBuffer||val.constructor&&"ArrayBuffer"===val.constructor.name)}function sendMessage(logger,transportName,httpClient,url,accessTokenFactory,content,logMessageContent){return __awaiter(this,void 0,void 0,(function(){var _a,headers,token,responseType,response;return __generator(this,(function(_b){switch(_b.label){case 0:return accessTokenFactory?[4,accessTokenFactory()]:[3,2];case 1:(token=_b.sent())&&((_a={}).Authorization="Bearer "+token,headers=_a),_b.label=2;case 2:return logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_0__.LogLevel.Trace,"("+transportName+" transport) sending data. "+getDataDetail(content,logMessageContent)+"."),responseType=isArrayBuffer(content)?"arraybuffer":"text",[4,httpClient.post(url,{content:content,headers:headers,responseType:responseType})];case 3:return response=_b.sent(),logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_0__.LogLevel.Trace,"("+transportName+" transport) request complete. Response status: "+response.statusCode+"."),[2]}}))}))}function createLogger(logger){return void 0===logger?new ConsoleLogger(_ILogger__WEBPACK_IMPORTED_MODULE_0__.LogLevel.Information):null===logger?_Loggers__WEBPACK_IMPORTED_MODULE_1__.NullLogger.instance:logger.log?logger:new ConsoleLogger(logger)}var SubjectSubscription=function(){function SubjectSubscription(subject,observer){this.subject=subject,this.observer=observer}return SubjectSubscription.prototype.dispose=function(){var index=this.subject.observers.indexOf(this.observer);index>-1&&this.subject.observers.splice(index,1),0===this.subject.observers.length&&this.subject.cancelCallback&&this.subject.cancelCallback().catch((function(_){}))},SubjectSubscription}(),ConsoleLogger=function(){function ConsoleLogger(minimumLogLevel){this.minimumLogLevel=minimumLogLevel,this.outputConsole=console}return ConsoleLogger.prototype.log=function(logLevel,message){if(logLevel>=this.minimumLogLevel)switch(logLevel){case _ILogger__WEBPACK_IMPORTED_MODULE_0__.LogLevel.Critical:case _ILogger__WEBPACK_IMPORTED_MODULE_0__.LogLevel.Error:this.outputConsole.error("["+(new Date).toISOString()+"] "+_ILogger__WEBPACK_IMPORTED_MODULE_0__.LogLevel[logLevel]+": "+message);break;case _ILogger__WEBPACK_IMPORTED_MODULE_0__.LogLevel.Warning:this.outputConsole.warn("["+(new Date).toISOString()+"] "+_ILogger__WEBPACK_IMPORTED_MODULE_0__.LogLevel[logLevel]+": "+message);break;case _ILogger__WEBPACK_IMPORTED_MODULE_0__.LogLevel.Information:this.outputConsole.info("["+(new Date).toISOString()+"] "+_ILogger__WEBPACK_IMPORTED_MODULE_0__.LogLevel[logLevel]+": "+message);break;default:this.outputConsole.log("["+(new Date).toISOString()+"] "+_ILogger__WEBPACK_IMPORTED_MODULE_0__.LogLevel[logLevel]+": "+message)}},ConsoleLogger}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NullLogger",(function(){return NullLogger}));var NullLogger=function(){function NullLogger(){}return NullLogger.prototype.log=function(_logLevel,_message){},NullLogger.instance=new NullLogger,NullLogger}()},function(module,__webpack_exports__,__webpack_require__){"use strict";var MessageType;__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"MessageType",(function(){return MessageType})),function(MessageType){MessageType[MessageType.Invocation=1]="Invocation",MessageType[MessageType.StreamItem=2]="StreamItem",MessageType[MessageType.Completion=3]="Completion",MessageType[MessageType.StreamInvocation=4]="StreamInvocation",MessageType[MessageType.CancelInvocation=5]="CancelInvocation",MessageType[MessageType.Ping=6]="Ping",MessageType[MessageType.Close=7]="Close"}(MessageType||(MessageType={}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Subject",(function(){return Subject}));var _Utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(13),Subject=function(){function Subject(){this.observers=[]}return Subject.prototype.next=function(item){for(var _i=0,_a=this.observers;_i<_a.length;_i++){var observer;_a[_i].next(item)}},Subject.prototype.error=function(err){for(var _i=0,_a=this.observers;_i<_a.length;_i++){var observer=_a[_i];observer.error&&observer.error(err)}},Subject.prototype.complete=function(){for(var _i=0,_a=this.observers;_i<_a.length;_i++){var observer=_a[_i];observer.complete&&observer.complete()}},Subject.prototype.subscribe=function(observer){return this.observers.push(observer),new _Utils__WEBPACK_IMPORTED_MODULE_0__.SubjectSubscription(this,observer)},Subject}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"HubConnectionBuilder",(function(){return HubConnectionBuilder}));var _DefaultReconnectPolicy__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(18),_HttpConnection__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(19),_HubConnection__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(10),_ILogger__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9),_JsonHubProtocol__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(25),_Loggers__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(14),_Utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(13),__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},LogLevelNameMapping={trace:_ILogger__WEBPACK_IMPORTED_MODULE_3__.LogLevel.Trace,debug:_ILogger__WEBPACK_IMPORTED_MODULE_3__.LogLevel.Debug,info:_ILogger__WEBPACK_IMPORTED_MODULE_3__.LogLevel.Information,information:_ILogger__WEBPACK_IMPORTED_MODULE_3__.LogLevel.Information,warn:_ILogger__WEBPACK_IMPORTED_MODULE_3__.LogLevel.Warning,warning:_ILogger__WEBPACK_IMPORTED_MODULE_3__.LogLevel.Warning,error:_ILogger__WEBPACK_IMPORTED_MODULE_3__.LogLevel.Error,critical:_ILogger__WEBPACK_IMPORTED_MODULE_3__.LogLevel.Critical,none:_ILogger__WEBPACK_IMPORTED_MODULE_3__.LogLevel.None};function parseLogLevel(name){var mapping=LogLevelNameMapping[name.toLowerCase()];if(void 0!==mapping)return mapping;throw new Error("Unknown log level: "+name)}var HubConnectionBuilder=function(){function HubConnectionBuilder(){}return HubConnectionBuilder.prototype.configureLogging=function(logging){if(_Utils__WEBPACK_IMPORTED_MODULE_6__.Arg.isRequired(logging,"logging"),isLogger(logging))this.logger=logging;else if("string"==typeof logging){var logLevel=parseLogLevel(logging);this.logger=new _Utils__WEBPACK_IMPORTED_MODULE_6__.ConsoleLogger(logLevel)}else this.logger=new _Utils__WEBPACK_IMPORTED_MODULE_6__.ConsoleLogger(logging);return this},HubConnectionBuilder.prototype.withUrl=function(url,transportTypeOrOptions){return _Utils__WEBPACK_IMPORTED_MODULE_6__.Arg.isRequired(url,"url"),this.url=url,this.httpConnectionOptions=__assign({},this.httpConnectionOptions,"object"==typeof transportTypeOrOptions?transportTypeOrOptions:{transport:transportTypeOrOptions}),this},HubConnectionBuilder.prototype.withHubProtocol=function(protocol){return _Utils__WEBPACK_IMPORTED_MODULE_6__.Arg.isRequired(protocol,"protocol"),this.protocol=protocol,this},HubConnectionBuilder.prototype.withAutomaticReconnect=function(retryDelaysOrReconnectPolicy){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return retryDelaysOrReconnectPolicy?Array.isArray(retryDelaysOrReconnectPolicy)?this.reconnectPolicy=new _DefaultReconnectPolicy__WEBPACK_IMPORTED_MODULE_0__.DefaultReconnectPolicy(retryDelaysOrReconnectPolicy):this.reconnectPolicy=retryDelaysOrReconnectPolicy:this.reconnectPolicy=new _DefaultReconnectPolicy__WEBPACK_IMPORTED_MODULE_0__.DefaultReconnectPolicy,this},HubConnectionBuilder.prototype.build=function(){var httpConnectionOptions=this.httpConnectionOptions||{};if(void 0===httpConnectionOptions.logger&&(httpConnectionOptions.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");var connection=new _HttpConnection__WEBPACK_IMPORTED_MODULE_1__.HttpConnection(this.url,httpConnectionOptions);return _HubConnection__WEBPACK_IMPORTED_MODULE_2__.HubConnection.create(connection,this.logger||_Loggers__WEBPACK_IMPORTED_MODULE_5__.NullLogger.instance,this.protocol||new _JsonHubProtocol__WEBPACK_IMPORTED_MODULE_4__.JsonHubProtocol,this.reconnectPolicy)},HubConnectionBuilder}();function isLogger(logger){return void 0!==logger.log}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"DefaultReconnectPolicy",(function(){return DefaultReconnectPolicy}));var DEFAULT_RETRY_DELAYS_IN_MILLISECONDS=[0,2e3,1e4,3e4,null],DefaultReconnectPolicy=function(){function DefaultReconnectPolicy(retryDelays){this.retryDelays=void 0!==retryDelays?retryDelays.concat([null]):DEFAULT_RETRY_DELAYS_IN_MILLISECONDS}return DefaultReconnectPolicy.prototype.nextRetryDelayInMilliseconds=function(retryContext){return this.retryDelays[retryContext.previousRetryCount]},DefaultReconnectPolicy}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"HttpConnection",(function(){return HttpConnection})),__webpack_require__.d(__webpack_exports__,"TransportSendQueue",(function(){return TransportSendQueue}));var _DefaultHttpClient__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6),_ILogger__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),_ITransport__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(20),_LongPollingTransport__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(21),_ServerSentEventsTransport__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(23),_Utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(13),_WebSocketTransport__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(24),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P((function(resolve){resolve(result.value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var _={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}},MAX_REDIRECTS=100,WebSocketModule=null,EventSourceModule=null;if(_Utils__WEBPACK_IMPORTED_MODULE_5__.Platform.isNode){var requireFunc=require;WebSocketModule=requireFunc("ws"),EventSourceModule=requireFunc("eventsource")}var HttpConnection=function(){function HttpConnection(url,options){void 0===options&&(options={}),this.features={},this.negotiateVersion=1,_Utils__WEBPACK_IMPORTED_MODULE_5__.Arg.isRequired(url,"url"),this.logger=Object(_Utils__WEBPACK_IMPORTED_MODULE_5__.createLogger)(options.logger),this.baseUrl=this.resolveUrl(url),(options=options||{}).logMessageContent=options.logMessageContent||!1,_Utils__WEBPACK_IMPORTED_MODULE_5__.Platform.isNode||"undefined"==typeof WebSocket||options.WebSocket?_Utils__WEBPACK_IMPORTED_MODULE_5__.Platform.isNode&&!options.WebSocket&&WebSocketModule&&(options.WebSocket=WebSocketModule):options.WebSocket=WebSocket,_Utils__WEBPACK_IMPORTED_MODULE_5__.Platform.isNode||"undefined"==typeof EventSource||options.EventSource?_Utils__WEBPACK_IMPORTED_MODULE_5__.Platform.isNode&&!options.EventSource&&void 0!==EventSourceModule&&(options.EventSource=EventSourceModule):options.EventSource=EventSource,this.httpClient=options.httpClient||new _DefaultHttpClient__WEBPACK_IMPORTED_MODULE_0__.DefaultHttpClient(this.logger),this.connectionState="Disconnected",this.connectionStarted=!1,this.options=options,this.onreceive=null,this.onclose=null}return HttpConnection.prototype.start=function(transferFormat){return __awaiter(this,void 0,void 0,(function(){var message,message;return __generator(this,(function(_a){switch(_a.label){case 0:return transferFormat=transferFormat||_ITransport__WEBPACK_IMPORTED_MODULE_2__.TransferFormat.Binary,_Utils__WEBPACK_IMPORTED_MODULE_5__.Arg.isIn(transferFormat,_ITransport__WEBPACK_IMPORTED_MODULE_2__.TransferFormat,"transferFormat"),this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Debug,"Starting connection with transfer format '"+_ITransport__WEBPACK_IMPORTED_MODULE_2__.TransferFormat[transferFormat]+"'."),"Disconnected"!==this.connectionState?[2,Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."))]:(this.connectionState="Connecting ",this.startInternalPromise=this.startInternal(transferFormat),[4,this.startInternalPromise]);case 1:return _a.sent(),"Disconnecting"!==this.connectionState?[3,3]:(message="Failed to start the HttpConnection before stop() was called.",this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Error,message),[4,this.stopPromise]);case 2:return _a.sent(),[2,Promise.reject(new Error(message))];case 3:if("Connected"!==this.connectionState)return message="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!",this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Error,message),[2,Promise.reject(new Error(message))];_a.label=4;case 4:return this.connectionStarted=!0,[2]}}))}))},HttpConnection.prototype.send=function(data){return"Connected"!==this.connectionState?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this.sendQueue||(this.sendQueue=new TransportSendQueue(this.transport)),this.sendQueue.send(data))},HttpConnection.prototype.stop=function(error){return __awaiter(this,void 0,void 0,(function(){var _this=this;return __generator(this,(function(_a){switch(_a.label){case 0:return"Disconnected"===this.connectionState?(this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Debug,"Call to HttpConnection.stop("+error+") ignored because the connection is already in the disconnected state."),[2,Promise.resolve()]):"Disconnecting"===this.connectionState?(this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Debug,"Call to HttpConnection.stop("+error+") ignored because the connection is already in the disconnecting state."),[2,this.stopPromise]):(this.connectionState="Disconnecting",this.stopPromise=new Promise((function(resolve){_this.stopPromiseResolver=resolve})),[4,this.stopInternal(error)]);case 1:return _a.sent(),[4,this.stopPromise];case 2:return _a.sent(),[2]}}))}))},HttpConnection.prototype.stopInternal=function(error){return __awaiter(this,void 0,void 0,(function(){var e_1,e_2;return __generator(this,(function(_a){switch(_a.label){case 0:this.stopError=error,_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,this.startInternalPromise];case 2:return _a.sent(),[3,4];case 3:return e_1=_a.sent(),[3,4];case 4:if(!this.transport)return[3,9];_a.label=5;case 5:return _a.trys.push([5,7,,8]),[4,this.transport.stop()];case 6:return _a.sent(),[3,8];case 7:return e_2=_a.sent(),this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Error,"HttpConnection.transport.stop() threw error '"+e_2+"'."),this.stopConnection(),[3,8];case 8:return this.transport=void 0,[3,10];case 9:this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed."),this.stopConnection(),_a.label=10;case 10:return[2]}}))}))},HttpConnection.prototype.startInternal=function(transferFormat){return __awaiter(this,void 0,void 0,(function(){var url,negotiateResponse,redirects,_loop_1,this_1,e_3;return __generator(this,(function(_a){switch(_a.label){case 0:url=this.baseUrl,this.accessTokenFactory=this.options.accessTokenFactory,_a.label=1;case 1:return _a.trys.push([1,12,,13]),this.options.skipNegotiation?this.options.transport!==_ITransport__WEBPACK_IMPORTED_MODULE_2__.HttpTransportType.WebSockets?[3,3]:(this.transport=this.constructTransport(_ITransport__WEBPACK_IMPORTED_MODULE_2__.HttpTransportType.WebSockets),[4,this.startTransport(url,transferFormat)]):[3,5];case 2:return _a.sent(),[3,4];case 3:throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");case 4:return[3,11];case 5:negotiateResponse=null,redirects=0,_loop_1=function(){var accessToken_1;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,this_1.getNegotiationResponse(url)];case 1:if(negotiateResponse=_a.sent(),"Disconnecting"===this_1.connectionState||"Disconnected"===this_1.connectionState)throw new Error("The connection was stopped during negotiation.");if(negotiateResponse.error)throw new Error(negotiateResponse.error);if(negotiateResponse.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");return negotiateResponse.url&&(url=negotiateResponse.url),negotiateResponse.accessToken&&(accessToken_1=negotiateResponse.accessToken,this_1.accessTokenFactory=function(){return accessToken_1}),redirects++,[2]}}))},this_1=this,_a.label=6;case 6:return[5,_loop_1()];case 7:_a.sent(),_a.label=8;case 8:if(negotiateResponse.url&&redirects<100)return[3,6];_a.label=9;case 9:if(100===redirects&&negotiateResponse.url)throw new Error("Negotiate redirection limit exceeded.");return[4,this.createTransport(url,this.options.transport,negotiateResponse,transferFormat)];case 10:_a.sent(),_a.label=11;case 11:return this.transport instanceof _LongPollingTransport__WEBPACK_IMPORTED_MODULE_3__.LongPollingTransport&&(this.features.inherentKeepAlive=!0),"Connecting "===this.connectionState&&(this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Debug,"The HttpConnection connected successfully."),this.connectionState="Connected"),[3,13];case 12:return e_3=_a.sent(),this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Error,"Failed to start the connection: "+e_3),this.connectionState="Disconnected",this.transport=void 0,[2,Promise.reject(e_3)];case 13:return[2]}}))}))},HttpConnection.prototype.getNegotiationResponse=function(url){return __awaiter(this,void 0,void 0,(function(){var _a,headers,token,negotiateUrl,response,negotiateResponse,e_4;return __generator(this,(function(_b){switch(_b.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(token=_b.sent())&&((_a={}).Authorization="Bearer "+token,headers=_a),_b.label=2;case 2:negotiateUrl=this.resolveNegotiateUrl(url),this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Debug,"Sending negotiation request: "+negotiateUrl+"."),_b.label=3;case 3:return _b.trys.push([3,5,,6]),[4,this.httpClient.post(negotiateUrl,{content:"",headers:headers})];case 4:return 200!==(response=_b.sent()).statusCode?[2,Promise.reject(new Error("Unexpected status code returned from negotiate "+response.statusCode))]:((!(negotiateResponse=JSON.parse(response.content)).negotiateVersion||negotiateResponse.negotiateVersion<1)&&(negotiateResponse.connectionToken=negotiateResponse.connectionId),[2,negotiateResponse]);case 5:return e_4=_b.sent(),this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Error,"Failed to complete negotiation with the server: "+e_4),[2,Promise.reject(e_4)];case 6:return[2]}}))}))},HttpConnection.prototype.createConnectUrl=function(url,connectionToken){return connectionToken?url+(-1===url.indexOf("?")?"?":"&")+"id="+connectionToken:url},HttpConnection.prototype.createTransport=function(url,requestedTransport,negotiateResponse,requestedTransferFormat){return __awaiter(this,void 0,void 0,(function(){var connectUrl,transportExceptions,transports,negotiate,_i,transports_1,endpoint,transportOrError,ex_1,ex_2,message;return __generator(this,(function(_a){switch(_a.label){case 0:return connectUrl=this.createConnectUrl(url,negotiateResponse.connectionToken),this.isITransport(requestedTransport)?(this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=requestedTransport,[4,this.startTransport(connectUrl,requestedTransferFormat)]):[3,2];case 1:return _a.sent(),this.connectionId=negotiateResponse.connectionId,[2];case 2:transportExceptions=[],transports=negotiateResponse.availableTransports||[],negotiate=negotiateResponse,_i=0,transports_1=transports,_a.label=3;case 3:return _i<transports_1.length?(endpoint=transports_1[_i],(transportOrError=this.resolveTransportOrError(endpoint,requestedTransport,requestedTransferFormat))instanceof Error?(transportExceptions.push(endpoint.transport+" failed: "+transportOrError),[3,12]):[3,4]):[3,13];case 4:if(!this.isITransport(transportOrError))return[3,12];if(this.transport=transportOrError,negotiate)return[3,9];_a.label=5;case 5:return _a.trys.push([5,7,,8]),[4,this.getNegotiationResponse(url)];case 6:return negotiate=_a.sent(),[3,8];case 7:return ex_1=_a.sent(),[2,Promise.reject(ex_1)];case 8:connectUrl=this.createConnectUrl(url,negotiate.connectionToken),_a.label=9;case 9:return _a.trys.push([9,11,,12]),[4,this.startTransport(connectUrl,requestedTransferFormat)];case 10:return _a.sent(),this.connectionId=negotiate.connectionId,[2];case 11:return ex_2=_a.sent(),this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Error,"Failed to start the transport '"+endpoint.transport+"': "+ex_2),negotiate=void 0,transportExceptions.push(endpoint.transport+" failed: "+ex_2),"Connecting "!==this.connectionState?(message="Failed to select transport before stop() was called.",this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Debug,message),[2,Promise.reject(new Error(message))]):[3,12];case 12:return _i++,[3,3];case 13:return transportExceptions.length>0?[2,Promise.reject(new Error("Unable to connect to the server with any of the available transports. "+transportExceptions.join(" ")))]:[2,Promise.reject(new Error("None of the transports supported by the client are supported by the server."))]}}))}))},HttpConnection.prototype.constructTransport=function(transport){switch(transport){case _ITransport__WEBPACK_IMPORTED_MODULE_2__.HttpTransportType.WebSockets:if(!this.options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new _WebSocketTransport__WEBPACK_IMPORTED_MODULE_6__.WebSocketTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.WebSocket);case _ITransport__WEBPACK_IMPORTED_MODULE_2__.HttpTransportType.ServerSentEvents:if(!this.options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new _ServerSentEventsTransport__WEBPACK_IMPORTED_MODULE_4__.ServerSentEventsTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.EventSource);case _ITransport__WEBPACK_IMPORTED_MODULE_2__.HttpTransportType.LongPolling:return new _LongPollingTransport__WEBPACK_IMPORTED_MODULE_3__.LongPollingTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1);default:throw new Error("Unknown transport: "+transport+".")}},HttpConnection.prototype.startTransport=function(url,transferFormat){var _this=this;return this.transport.onreceive=this.onreceive,this.transport.onclose=function(e){return _this.stopConnection(e)},this.transport.connect(url,transferFormat)},HttpConnection.prototype.resolveTransportOrError=function(endpoint,requestedTransport,requestedTransferFormat){var transport=_ITransport__WEBPACK_IMPORTED_MODULE_2__.HttpTransportType[endpoint.transport],transferFormats;if(null==transport)return this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Debug,"Skipping transport '"+endpoint.transport+"' because it is not supported by this client."),new Error("Skipping transport '"+endpoint.transport+"' because it is not supported by this client.");if(!transportMatches(requestedTransport,transport))return this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Debug,"Skipping transport '"+_ITransport__WEBPACK_IMPORTED_MODULE_2__.HttpTransportType[transport]+"' because it was disabled by the client."),new Error("'"+_ITransport__WEBPACK_IMPORTED_MODULE_2__.HttpTransportType[transport]+"' is disabled by the client.");if(!(endpoint.transferFormats.map((function(s){return _ITransport__WEBPACK_IMPORTED_MODULE_2__.TransferFormat[s]})).indexOf(requestedTransferFormat)>=0))return this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Debug,"Skipping transport '"+_ITransport__WEBPACK_IMPORTED_MODULE_2__.HttpTransportType[transport]+"' because it does not support the requested transfer format '"+_ITransport__WEBPACK_IMPORTED_MODULE_2__.TransferFormat[requestedTransferFormat]+"'."),new Error("'"+_ITransport__WEBPACK_IMPORTED_MODULE_2__.HttpTransportType[transport]+"' does not support "+_ITransport__WEBPACK_IMPORTED_MODULE_2__.TransferFormat[requestedTransferFormat]+".");if(transport===_ITransport__WEBPACK_IMPORTED_MODULE_2__.HttpTransportType.WebSockets&&!this.options.WebSocket||transport===_ITransport__WEBPACK_IMPORTED_MODULE_2__.HttpTransportType.ServerSentEvents&&!this.options.EventSource)return this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Debug,"Skipping transport '"+_ITransport__WEBPACK_IMPORTED_MODULE_2__.HttpTransportType[transport]+"' because it is not supported in your environment.'"),new Error("'"+_ITransport__WEBPACK_IMPORTED_MODULE_2__.HttpTransportType[transport]+"' is not supported in your environment.");this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Debug,"Selecting transport '"+_ITransport__WEBPACK_IMPORTED_MODULE_2__.HttpTransportType[transport]+"'.");try{return this.constructTransport(transport)}catch(ex){return ex}},HttpConnection.prototype.isITransport=function(transport){return transport&&"object"==typeof transport&&"connect"in transport},HttpConnection.prototype.stopConnection=function(error){var _this=this;if(this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Debug,"HttpConnection.stopConnection("+error+") called while in state "+this.connectionState+"."),this.transport=void 0,error=this.stopError||error,this.stopError=void 0,"Disconnected"!==this.connectionState)if("Connecting "!==this.connectionState){if("Disconnecting"===this.connectionState&&this.stopPromiseResolver(),error?this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Error,"Connection disconnected with error '"+error+"'."):this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Information,"Connection disconnected."),this.sendQueue&&(this.sendQueue.stop().catch((function(e){_this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Error,"TransportSendQueue.stop() threw error '"+e+"'.")})),this.sendQueue=void 0),this.connectionId=void 0,this.connectionState="Disconnected",this.connectionStarted){this.connectionStarted=!1;try{this.onclose&&this.onclose(error)}catch(e){this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Error,"HttpConnection.onclose("+error+") threw error '"+e+"'.")}}}else this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Warning,"Call to HttpConnection.stopConnection("+error+") was ignored because the connection hasn't yet left the in the connecting state.");else this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Debug,"Call to HttpConnection.stopConnection("+error+") was ignored because the connection is already in the disconnected state.")},HttpConnection.prototype.resolveUrl=function(url){if(0===url.lastIndexOf("https://",0)||0===url.lastIndexOf("http://",0))return url;if(!_Utils__WEBPACK_IMPORTED_MODULE_5__.Platform.isBrowser||!window.document)throw new Error("Cannot resolve '"+url+"'.");var aTag=window.document.createElement("a");return aTag.href=url,this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Information,"Normalizing '"+url+"' to '"+aTag.href+"'."),aTag.href},HttpConnection.prototype.resolveNegotiateUrl=function(url){var index=url.indexOf("?"),negotiateUrl=url.substring(0,-1===index?url.length:index);return"/"!==negotiateUrl[negotiateUrl.length-1]&&(negotiateUrl+="/"),negotiateUrl+="negotiate",-1===(negotiateUrl+=-1===index?"":url.substring(index)).indexOf("negotiateVersion")&&(negotiateUrl+=-1===index?"?":"&",negotiateUrl+="negotiateVersion="+this.negotiateVersion),negotiateUrl},HttpConnection}();function transportMatches(requestedTransport,actualTransport){return!requestedTransport||0!=(actualTransport&requestedTransport)}var TransportSendQueue=function(){function TransportSendQueue(transport){this.transport=transport,this.buffer=[],this.executing=!0,this.sendBufferedData=new PromiseSource,this.transportResult=new PromiseSource,this.sendLoopPromise=this.sendLoop()}return TransportSendQueue.prototype.send=function(data){return this.bufferData(data),this.transportResult||(this.transportResult=new PromiseSource),this.transportResult.promise},TransportSendQueue.prototype.stop=function(){return this.executing=!1,this.sendBufferedData.resolve(),this.sendLoopPromise},TransportSendQueue.prototype.bufferData=function(data){if(this.buffer.length&&typeof this.buffer[0]!=typeof data)throw new Error("Expected data to be of type "+typeof this.buffer+" but was of type "+typeof data);this.buffer.push(data),this.sendBufferedData.resolve()},TransportSendQueue.prototype.sendLoop=function(){return __awaiter(this,void 0,void 0,(function(){var transportResult,data,error_1;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,this.sendBufferedData.promise];case 1:if(_a.sent(),!this.executing)return this.transportResult&&this.transportResult.reject("Connection stopped."),[3,6];this.sendBufferedData=new PromiseSource,transportResult=this.transportResult,this.transportResult=void 0,data="string"==typeof this.buffer[0]?this.buffer.join(""):TransportSendQueue.concatBuffers(this.buffer),this.buffer.length=0,_a.label=2;case 2:return _a.trys.push([2,4,,5]),[4,this.transport.send(data)];case 3:return _a.sent(),transportResult.resolve(),[3,5];case 4:return error_1=_a.sent(),transportResult.reject(error_1),[3,5];case 5:return[3,0];case 6:return[2]}}))}))},TransportSendQueue.concatBuffers=function(arrayBuffers){for(var totalLength=arrayBuffers.map((function(b){return b.byteLength})).reduce((function(a,b){return a+b})),result=new Uint8Array(totalLength),offset=0,_i=0,arrayBuffers_1=arrayBuffers;_i<arrayBuffers_1.length;_i++){var item=arrayBuffers_1[_i];result.set(new Uint8Array(item),offset),offset+=item.byteLength}return result},TransportSendQueue}(),PromiseSource=function(){function PromiseSource(){var _this=this;this.promise=new Promise((function(resolve,reject){var _a;return _a=[resolve,reject],_this.resolver=_a[0],_this.rejecter=_a[1],_a}))}return PromiseSource.prototype.resolve=function(){this.resolver()},PromiseSource.prototype.reject=function(reason){this.rejecter(reason)},PromiseSource}()},function(module,__webpack_exports__,__webpack_require__){"use strict";var HttpTransportType,TransferFormat;__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"HttpTransportType",(function(){return HttpTransportType})),__webpack_require__.d(__webpack_exports__,"TransferFormat",(function(){return TransferFormat})),function(HttpTransportType){HttpTransportType[HttpTransportType.None=0]="None",HttpTransportType[HttpTransportType.WebSockets=1]="WebSockets",HttpTransportType[HttpTransportType.ServerSentEvents=2]="ServerSentEvents",HttpTransportType[HttpTransportType.LongPolling=4]="LongPolling"}(HttpTransportType||(HttpTransportType={})),function(TransferFormat){TransferFormat[TransferFormat.Text=1]="Text",TransferFormat[TransferFormat.Binary=2]="Binary"}(TransferFormat||(TransferFormat={}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"LongPollingTransport",(function(){return LongPollingTransport}));var _AbortController__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(22),_Errors__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4),_ILogger__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9),_ITransport__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(20),_Utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(13),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P((function(resolve){resolve(result.value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var _={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}},LongPollingTransport=function(){function LongPollingTransport(httpClient,accessTokenFactory,logger,logMessageContent){this.httpClient=httpClient,this.accessTokenFactory=accessTokenFactory,this.logger=logger,this.pollAbort=new _AbortController__WEBPACK_IMPORTED_MODULE_0__.AbortController,this.logMessageContent=logMessageContent,this.running=!1,this.onreceive=null,this.onclose=null}return Object.defineProperty(LongPollingTransport.prototype,"pollAborted",{get:function(){return this.pollAbort.aborted},enumerable:!0,configurable:!0}),LongPollingTransport.prototype.connect=function(url,transferFormat){return __awaiter(this,void 0,void 0,(function(){var pollOptions,token,pollUrl,response;return __generator(this,(function(_a){switch(_a.label){case 0:if(_Utils__WEBPACK_IMPORTED_MODULE_4__.Arg.isRequired(url,"url"),_Utils__WEBPACK_IMPORTED_MODULE_4__.Arg.isRequired(transferFormat,"transferFormat"),_Utils__WEBPACK_IMPORTED_MODULE_4__.Arg.isIn(transferFormat,_ITransport__WEBPACK_IMPORTED_MODULE_3__.TransferFormat,"transferFormat"),this.url=url,this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Trace,"(LongPolling transport) Connecting."),transferFormat===_ITransport__WEBPACK_IMPORTED_MODULE_3__.TransferFormat.Binary&&"undefined"!=typeof XMLHttpRequest&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");return pollOptions={abortSignal:this.pollAbort.signal,headers:{},timeout:1e5},transferFormat===_ITransport__WEBPACK_IMPORTED_MODULE_3__.TransferFormat.Binary&&(pollOptions.responseType="arraybuffer"),[4,this.getAccessToken()];case 1:return token=_a.sent(),this.updateHeaderToken(pollOptions,token),pollUrl=url+"&_="+Date.now(),this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Trace,"(LongPolling transport) polling: "+pollUrl+"."),[4,this.httpClient.get(pollUrl,pollOptions)];case 2:return 200!==(response=_a.sent()).statusCode?(this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Error,"(LongPolling transport) Unexpected response code: "+response.statusCode+"."),this.closeError=new _Errors__WEBPACK_IMPORTED_MODULE_1__.HttpError(response.statusText||"",response.statusCode),this.running=!1):this.running=!0,this.receiving=this.poll(this.url,pollOptions),[2]}}))}))},LongPollingTransport.prototype.getAccessToken=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:return[2,_a.sent()];case 2:return[2,null]}}))}))},LongPollingTransport.prototype.updateHeaderToken=function(request,token){request.headers||(request.headers={}),token?request.headers.Authorization="Bearer "+token:request.headers.Authorization&&delete request.headers.Authorization},LongPollingTransport.prototype.poll=function(url,pollOptions){return __awaiter(this,void 0,void 0,(function(){var token,pollUrl,response,e_1;return __generator(this,(function(_a){switch(_a.label){case 0:_a.trys.push([0,,8,9]),_a.label=1;case 1:return this.running?[4,this.getAccessToken()]:[3,7];case 2:token=_a.sent(),this.updateHeaderToken(pollOptions,token),_a.label=3;case 3:return _a.trys.push([3,5,,6]),pollUrl=url+"&_="+Date.now(),this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Trace,"(LongPolling transport) polling: "+pollUrl+"."),[4,this.httpClient.get(pollUrl,pollOptions)];case 4:return 204===(response=_a.sent()).statusCode?(this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Information,"(LongPolling transport) Poll terminated by server."),this.running=!1):200!==response.statusCode?(this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Error,"(LongPolling transport) Unexpected response code: "+response.statusCode+"."),this.closeError=new _Errors__WEBPACK_IMPORTED_MODULE_1__.HttpError(response.statusText||"",response.statusCode),this.running=!1):response.content?(this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Trace,"(LongPolling transport) data received. "+Object(_Utils__WEBPACK_IMPORTED_MODULE_4__.getDataDetail)(response.content,this.logMessageContent)+"."),this.onreceive&&this.onreceive(response.content)):this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Trace,"(LongPolling transport) Poll timed out, reissuing."),[3,6];case 5:return e_1=_a.sent(),this.running?e_1 instanceof _Errors__WEBPACK_IMPORTED_MODULE_1__.TimeoutError?this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this.closeError=e_1,this.running=!1):this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Trace,"(LongPolling transport) Poll errored after shutdown: "+e_1.message),[3,6];case 6:return[3,1];case 7:return[3,9];case 8:return this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this.raiseOnClose(),[7];case 9:return[2]}}))}))},LongPollingTransport.prototype.send=function(data){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){return this.running?[2,Object(_Utils__WEBPACK_IMPORTED_MODULE_4__.sendMessage)(this.logger,"LongPolling",this.httpClient,this.url,this.accessTokenFactory,data,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]}))}))},LongPollingTransport.prototype.stop=function(){return __awaiter(this,void 0,void 0,(function(){var deleteOptions,token;return __generator(this,(function(_a){switch(_a.label){case 0:this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Trace,"(LongPolling transport) Stopping polling."),this.running=!1,this.pollAbort.abort(),_a.label=1;case 1:return _a.trys.push([1,,5,6]),[4,this.receiving];case 2:return _a.sent(),this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Trace,"(LongPolling transport) sending DELETE request to "+this.url+"."),deleteOptions={headers:{}},[4,this.getAccessToken()];case 3:return token=_a.sent(),this.updateHeaderToken(deleteOptions,token),[4,this.httpClient.delete(this.url,deleteOptions)];case 4:return _a.sent(),this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Trace,"(LongPolling transport) DELETE request sent."),[3,6];case 5:return this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Trace,"(LongPolling transport) Stop finished."),this.raiseOnClose(),[7];case 6:return[2]}}))}))},LongPollingTransport.prototype.raiseOnClose=function(){if(this.onclose){var logMessage="(LongPolling transport) Firing onclose event.";this.closeError&&(logMessage+=" Error: "+this.closeError),this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_2__.LogLevel.Trace,logMessage),this.onclose(this.closeError)}},LongPollingTransport}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"AbortController",(function(){return AbortController}));var AbortController=function(){function AbortController(){this.isAborted=!1,this.onabort=null}return AbortController.prototype.abort=function(){this.isAborted||(this.isAborted=!0,this.onabort&&this.onabort())},Object.defineProperty(AbortController.prototype,"signal",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(AbortController.prototype,"aborted",{get:function(){return this.isAborted},enumerable:!0,configurable:!0}),AbortController}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ServerSentEventsTransport",(function(){return ServerSentEventsTransport}));var _ILogger__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9),_ITransport__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(20),_Utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(13),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P((function(resolve){resolve(result.value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var _={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}},ServerSentEventsTransport=function(){function ServerSentEventsTransport(httpClient,accessTokenFactory,logger,logMessageContent,eventSourceConstructor){this.httpClient=httpClient,this.accessTokenFactory=accessTokenFactory,this.logger=logger,this.logMessageContent=logMessageContent,this.eventSourceConstructor=eventSourceConstructor,this.onreceive=null,this.onclose=null}return ServerSentEventsTransport.prototype.connect=function(url,transferFormat){return __awaiter(this,void 0,void 0,(function(){var token,_this=this;return __generator(this,(function(_a){switch(_a.label){case 0:return _Utils__WEBPACK_IMPORTED_MODULE_2__.Arg.isRequired(url,"url"),_Utils__WEBPACK_IMPORTED_MODULE_2__.Arg.isRequired(transferFormat,"transferFormat"),_Utils__WEBPACK_IMPORTED_MODULE_2__.Arg.isIn(transferFormat,_ITransport__WEBPACK_IMPORTED_MODULE_1__.TransferFormat,"transferFormat"),this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_0__.LogLevel.Trace,"(SSE transport) Connecting."),this.url=url,this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(token=_a.sent())&&(url+=(url.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(token)),_a.label=2;case 2:return[2,new Promise((function(resolve,reject){var opened=!1;if(transferFormat===_ITransport__WEBPACK_IMPORTED_MODULE_1__.TransferFormat.Text){var eventSource;if(_Utils__WEBPACK_IMPORTED_MODULE_2__.Platform.isBrowser||_Utils__WEBPACK_IMPORTED_MODULE_2__.Platform.isWebWorker)eventSource=new _this.eventSourceConstructor(url,{withCredentials:!0});else{var cookies=_this.httpClient.getCookieString(url);eventSource=new _this.eventSourceConstructor(url,{withCredentials:!0,headers:{Cookie:cookies}})}try{eventSource.onmessage=function(e){if(_this.onreceive)try{_this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_0__.LogLevel.Trace,"(SSE transport) data received. "+Object(_Utils__WEBPACK_IMPORTED_MODULE_2__.getDataDetail)(e.data,_this.logMessageContent)+"."),_this.onreceive(e.data)}catch(error){return void _this.close(error)}},eventSource.onerror=function(e){var error=new Error(e.data||"Error occurred");opened?_this.close(error):reject(error)},eventSource.onopen=function(){_this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_0__.LogLevel.Information,"SSE connected to "+_this.url),_this.eventSource=eventSource,opened=!0,resolve()}}catch(e){return void reject(e)}}else reject(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))}))]}}))}))},ServerSentEventsTransport.prototype.send=function(data){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){return this.eventSource?[2,Object(_Utils__WEBPACK_IMPORTED_MODULE_2__.sendMessage)(this.logger,"SSE",this.httpClient,this.url,this.accessTokenFactory,data,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]}))}))},ServerSentEventsTransport.prototype.stop=function(){return this.close(),Promise.resolve()},ServerSentEventsTransport.prototype.close=function(e){this.eventSource&&(this.eventSource.close(),this.eventSource=void 0,this.onclose&&this.onclose(e))},ServerSentEventsTransport}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"WebSocketTransport",(function(){return WebSocketTransport}));var _ILogger__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9),_ITransport__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(20),_Utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(13),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P((function(resolve){resolve(result.value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var _={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}},WebSocketTransport=function(){function WebSocketTransport(httpClient,accessTokenFactory,logger,logMessageContent,webSocketConstructor){this.logger=logger,this.accessTokenFactory=accessTokenFactory,this.logMessageContent=logMessageContent,this.webSocketConstructor=webSocketConstructor,this.httpClient=httpClient,this.onreceive=null,this.onclose=null}return WebSocketTransport.prototype.connect=function(url,transferFormat){return __awaiter(this,void 0,void 0,(function(){var token,_this=this;return __generator(this,(function(_a){switch(_a.label){case 0:return _Utils__WEBPACK_IMPORTED_MODULE_2__.Arg.isRequired(url,"url"),_Utils__WEBPACK_IMPORTED_MODULE_2__.Arg.isRequired(transferFormat,"transferFormat"),_Utils__WEBPACK_IMPORTED_MODULE_2__.Arg.isIn(transferFormat,_ITransport__WEBPACK_IMPORTED_MODULE_1__.TransferFormat,"transferFormat"),this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_0__.LogLevel.Trace,"(WebSockets transport) Connecting."),this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(token=_a.sent())&&(url+=(url.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(token)),_a.label=2;case 2:return[2,new Promise((function(resolve,reject){var webSocket;url=url.replace(/^http/,"ws");var cookies=_this.httpClient.getCookieString(url),opened=!1;_Utils__WEBPACK_IMPORTED_MODULE_2__.Platform.isNode&&cookies&&(webSocket=new _this.webSocketConstructor(url,void 0,{headers:{Cookie:""+cookies}})),webSocket||(webSocket=new _this.webSocketConstructor(url)),transferFormat===_ITransport__WEBPACK_IMPORTED_MODULE_1__.TransferFormat.Binary&&(webSocket.binaryType="arraybuffer"),webSocket.onopen=function(_event){_this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_0__.LogLevel.Information,"WebSocket connected to "+url+"."),_this.webSocket=webSocket,opened=!0,resolve()},webSocket.onerror=function(event){var error=null;error="undefined"!=typeof ErrorEvent&&event instanceof ErrorEvent?event.error:new Error("There was an error with the transport."),reject(error)},webSocket.onmessage=function(message){_this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_0__.LogLevel.Trace,"(WebSockets transport) data received. "+Object(_Utils__WEBPACK_IMPORTED_MODULE_2__.getDataDetail)(message.data,_this.logMessageContent)+"."),_this.onreceive&&_this.onreceive(message.data)},webSocket.onclose=function(event){if(opened)_this.close(event);else{var error=null;error="undefined"!=typeof ErrorEvent&&event instanceof ErrorEvent?event.error:new Error("There was an error with the transport."),reject(error)}}}))]}}))}))},WebSocketTransport.prototype.send=function(data){return this.webSocket&&this.webSocket.readyState===this.webSocketConstructor.OPEN?(this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_0__.LogLevel.Trace,"(WebSockets transport) sending data. "+Object(_Utils__WEBPACK_IMPORTED_MODULE_2__.getDataDetail)(data,this.logMessageContent)+"."),this.webSocket.send(data),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")},WebSocketTransport.prototype.stop=function(){return this.webSocket&&this.close(void 0),Promise.resolve()},WebSocketTransport.prototype.close=function(event){this.webSocket&&(this.webSocket.onclose=function(){},this.webSocket.onmessage=function(){},this.webSocket.onerror=function(){},this.webSocket.close(),this.webSocket=void 0),this.logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_0__.LogLevel.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!event||!1!==event.wasClean&&1e3===event.code?this.onclose():this.onclose(new Error("WebSocket closed with status code: "+event.code+" ("+event.reason+").")))},WebSocketTransport}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"JsonHubProtocol",(function(){return JsonHubProtocol}));var _IHubProtocol__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15),_ILogger__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),_ITransport__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(20),_Loggers__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(14),_TextMessageFormat__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12),JSON_HUB_PROTOCOL_NAME="json",JsonHubProtocol=function(){function JsonHubProtocol(){this.name="json",this.version=1,this.transferFormat=_ITransport__WEBPACK_IMPORTED_MODULE_2__.TransferFormat.Text}return JsonHubProtocol.prototype.parseMessages=function(input,logger){if("string"!=typeof input)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!input)return[];null===logger&&(logger=_Loggers__WEBPACK_IMPORTED_MODULE_3__.NullLogger.instance);for(var messages,hubMessages=[],_i=0,messages_1=_TextMessageFormat__WEBPACK_IMPORTED_MODULE_4__.TextMessageFormat.parse(input);_i<messages_1.length;_i++){var message=messages_1[_i],parsedMessage=JSON.parse(message);if("number"!=typeof parsedMessage.type)throw new Error("Invalid payload.");switch(parsedMessage.type){case _IHubProtocol__WEBPACK_IMPORTED_MODULE_0__.MessageType.Invocation:this.isInvocationMessage(parsedMessage);break;case _IHubProtocol__WEBPACK_IMPORTED_MODULE_0__.MessageType.StreamItem:this.isStreamItemMessage(parsedMessage);break;case _IHubProtocol__WEBPACK_IMPORTED_MODULE_0__.MessageType.Completion:this.isCompletionMessage(parsedMessage);break;case _IHubProtocol__WEBPACK_IMPORTED_MODULE_0__.MessageType.Ping:case _IHubProtocol__WEBPACK_IMPORTED_MODULE_0__.MessageType.Close:break;default:logger.log(_ILogger__WEBPACK_IMPORTED_MODULE_1__.LogLevel.Information,"Unknown message type '"+parsedMessage.type+"' ignored.");continue}hubMessages.push(parsedMessage)}return hubMessages},JsonHubProtocol.prototype.writeMessage=function(message){return _TextMessageFormat__WEBPACK_IMPORTED_MODULE_4__.TextMessageFormat.write(JSON.stringify(message))},JsonHubProtocol.prototype.isInvocationMessage=function(message){this.assertNotEmptyString(message.target,"Invalid payload for Invocation message."),void 0!==message.invocationId&&this.assertNotEmptyString(message.invocationId,"Invalid payload for Invocation message.")},JsonHubProtocol.prototype.isStreamItemMessage=function(message){if(this.assertNotEmptyString(message.invocationId,"Invalid payload for StreamItem message."),void 0===message.item)throw new Error("Invalid payload for StreamItem message.")},JsonHubProtocol.prototype.isCompletionMessage=function(message){if(message.result&&message.error)throw new Error("Invalid payload for Completion message.");!message.result&&message.error&&this.assertNotEmptyString(message.error,"Invalid payload for Completion message."),this.assertNotEmptyString(message.invocationId,"Invalid payload for Completion message.")},JsonHubProtocol.prototype.assertNotEmptyString=function(value,errorMessage){if("string"!=typeof value||""===value)throw new Error(errorMessage)},JsonHubProtocol}()}])}));